# 2. Инсталляция Linux и управление пакетами
## 2.4 Управление пакетами в Debian (102.4 Use Debian package management).

### Вопросы для самопроверки

1. Рассмотрим репозиторий с исходными пакетами Debian для дистрибутива xenial, размещенный на сайте http://us.archive.ubuntu.com/ubuntu/ и содержащий пакеты для компонента **universe**. Какая строка должна быть добавлена в **/etc/apt/sources.list**? 

    <details>
    <summary>Вариант ответа</summary>

    Исходные пакеты относятся к типу deb-src, поэтому строка должна быть такой: 
    ```sh
    deb-src http://us.archive.ubuntu.com/ubuntu/ xenial universe
    ``` 
    Эту строку можно также добавить в файл **.list** в **/etc/apt/sources.list.d/**. Название можно выбрать самостоятельно, но оно должно быть описательным, например, **xenial_sources.list**.
    
    </details>
<br> 


2. При компиляции программы вы столкнулись с сообщением об ошибке, в котором говорится, что заголовочный файл zzip-io.h отсутствует в вашей системе. Как узнать, какой пакет содержит этот файл? 

    <details>
    <summary>Вариант ответа</summary>

    Используйте `apt-file search` для поиска пакета, содержащего отсутствующий в системе файл:
    ```sh
    apt-file search zzip-io.h
    ```
    
    </details>
<br> 


3. Как проигнорировать предупреждение о зависимости и удалить пакет с помощью `dpkg`, даже если в системе есть пакеты, зависящие от него? 

    <details>
    <summary>Вариант ответа</summary>

    Можно использовать параметр `--force`, но этого не следует делать, если вы точно не знаете, что делаете, так как велик риск оставить систему в несовместимом или "broken" состоянии.
    
    </details>
<br> 

4. Какую команду следует использовать перед установкой или обновлением пакетов с помощью `apt-get`, чтобы убедиться в актуальности индекса пакета? 

    <details>
    <summary>Вариант ответа</summary>

    Следует использовать команду `apt-get update`. При этом будут загружены последние индексы пакетов из репозиториев, описанных в файле **/etc/apt/sources.list** или в каталоге **/etc/apt/sources.list.d/**.
    
    </details>
<br>

---
### Практические задания
1. Установите пакет ide-редактора VSCodium с помощью dpkg.

1.1 Скачайте пакет по ссылке с помощью `wget` со страницы https://github.com/VSCodium/vscodium/releases
```sh
wget https://github.com/VSCodium/vscodium/releases/download/1.81.1.23222/codium_1.81.1.23222_amd64.deb
```

1.2 Передайте dpkg параметр -i и установите пакет:
```sh
dpkg -i codium_1.81.1.23222_amd64.deb
```

1.3 Найдите в графической оболочке в меню с установленными программами редактор VSCodium и запустите его.

---
2. Получите информацию о пакете **gimp**? 

2.1 Используйте параметр **show**, за которым следует имя пакета:
```sh
apt-cache show gimp
```
2.2 Найдите в полученой информации упоминание о верси пакета, сравните с результатом ниже в примере:
```sh
Package: gimp
Version: 2.10.34-1
Installed-Size: 19877
Maintainer: Debian GNOME Maintainers <pkg-gnome-maintainers@lists.alioth.debian.org>
Architecture: amd64
```

---

3. Узнайте в каком пакете содержится файл **/usr/bin/unrar** с помощью утилиты `apt-file`? 

3.1 Используйте параметр **search**, за которым следует путь (или имя файла):
```sh
apt-file search /usr/bin/unrar
```
Имя команды должно отличаться от первоначального запроса.

3.2 Уточните имя пакета и точное имя файла(команды)в полученных данных

3.3 Установите пакет который необходим для распаковки  rar-архива
```sh
apt install unrar-free
```
3.4 Уточните версию утилиты 
```sh
$ unrar-free -V

unrar-free 0.1.3
```

---
4. Проверьте можно ли удалить пакет **bzip2** из системы с помощью `dpkg -r bzip2`, если от него зависит пакет **file-roller**? Если нет, то попробуйте другой способ удаления. 

4.1 Предварительно установите пакет **file-roller**
```sh
apt install file-roller
```
4.2 Удалите пакет **bzip2** из системы с помощью 
```sh
sudo dpkg -r bzip2
```
```sh
dpkg: проблемы с зависимостями не позволяют удалить пакет bzip2:
 file-roller зависит от bzip2.

dpkg: ошибка при обработке пакета bzip2 (--remove):
 проблемы с зависимостями — не удаляется
При обработке следующих пакетов произошли ошибки:
 bzip2
```

4.3 Нет. `dpkg` не разрешает зависимости и не позволяет удалить пакет, если от него зависит другой установленный пакет. В данном примере можно сначала удалить **file-roller** (предполагается, что от него ничего не зависит), а затем удалить **unzip**, или удалить оба пакета одновременно с помощью:

```sh
dpkg -r bzip2 file-roller
```

---
5. С помощью dpkg-запроса найдите, в каком пакете содержится файл с именем 7zr.1.gz.

5.1 Добавьте в dpkg-query параметр -S:
```sh
dpkg-query -S 7zr.1.gz
```
Убедитесь что ответ совпадает с примером ниже:
```sh
p7zip: /usr/share/man/man1/7zr.1.gz
```

